<!DOCTYPE html>
<html>
<head>
	
	<title>Teste de onibus</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>


	
</head>
<body>



<div id="mapid" style="width: 100%; height: 400px;"></div>
<script>
var x=0;
	var mymap = L.map('mapid').setView([-28.948233, -49.4636407], 17);

	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: '',
		id: 'mapbox.streets'
	}).addTo(mymap);
 var myIcon = L.icon({
    iconUrl: 'onibus.png',
    iconSize: [26, 26]
});
 var iconeParada = L.icon({
    iconUrl: 'parada.png',
    iconSize: [30, 30]
});

    var parada1 = L.marker([-28.9482, -49.46363]);
    parada1.bindTooltip("Parada 1").openTooltip();

    parada1.setIcon(iconeParada);
    parada1.addTo(mymap);
    
        var parada2 = L.marker([-28.948256, -49.46457]);
    parada2.bindTooltip("Parada 2").openTooltip();
    parada2.setIcon(iconeParada);
    parada2.addTo(mymap);

    var onibus1 = L.marker([-28.9482, -49.4636407]);
    onibus1.bindTooltip("<small>Volta ao morro</small>",{ permanent: true}).openTooltip();
    onibus1.setIcon(myIcon);
    onibus1.addTo(mymap);
    
    
    
    var onibus2 = L.marker([-28.946233, -49.46224237]);
    onibus2.bindTooltip("<small>Serrinha</small>",{ permanent: true}).openTooltip();
    onibus2.setIcon(myIcon);
    onibus2.addTo(mymap);
    
    
    // demonstra como atualizar as coordenadas dos onibus
    setInterval(function(){
    	onibus1.setLatLng([-28.948233+x, -49.4636407+x]);
    	onibus2.setLatLng([-28.948233-x, -49.4636407-x]);
    	x+=0.00005;
    }
    ,1000);
    
     
	

</script>



</body>
</html>

